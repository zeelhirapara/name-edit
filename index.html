<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hirpara Parivar Invitation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fce4ec;
            text-align: center;
            padding: 20px;
            margin: 0;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #880e4f;
        }

        h2 { color: #880e4f; margin-bottom: 5px; }
        .status { font-size: 14px; color: #333; margin-bottom: 20px; background: #eee; padding: 5px; border-radius: 5px;}

        .input-group {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #fff9c4;
            border-radius: 10px;
            text-align: left;
        }

        label { font-weight: bold; color: #333; display: block; margin-bottom: 5px; }

        input[type="text"] {
            padding: 12px;
            width: 95%;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        /* Buttons */
        .btn {
            padding: 14px 20px;
            font-size: 18px;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: transform 0.1s;
        }

        .btn-share { background-color: #25D366; } /* WhatsApp Green */
        .btn:active { transform: scale(0.98); }

        /* Preview Area */
        #previewArea {
            text-align: left;
            background-color: #fafafa;
            padding: 15px;
            border: 1px dashed #aaa;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            margin-top: 20px;
            white-space: pre-wrap;
            border-radius: 5px;
        }

        .highlight {
            font-weight: bold;
            color: #d81b60;
            background-color: #ffede0;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .instruction {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 10px;
            font-size: 14px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #c8e6c9;
            display: none; /* Hidden by default */
            text-align: left;
        }

    </style>
</head>
<body>

    <div class="container">
        <h2>ЁЯМ╕ Hirpara Parivar Invitation ЁЯМ╕</h2>
        <div class="status">ЁЯУД File Required: <b>Hirpara Parivar kankotri servo.pdf</b></div>

        <div class="input-group">
            <label>тЬНя╕П Enter Guest Name / ркорк╣рлЗркорк╛ркиркирлБркВ ркирк╛рко:</label>
            <input type="text" id="guestName" placeholder="e.g. ркХрк┐рк░рлАркЯркнрк╛ркИ рккркЯрлЗрк▓" oninput="updatePreview()">
        </div>

        <button class="btn btn-share" onclick="shareToWhatsApp()">
            ЁЯЪА Share on WhatsApp
        </button>
        
        <div id="msgBox" class="instruction">
            тЬЕ <b>Text Copied! / рк▓ркЦрк╛ркг ркХрлЛрккрлА ркеркИ ркЧркпрлБркВ ркЫрлЗ!</b> <br><br>
            1. Select WhatsApp contact.<br>
            2. When the PDF attaches, <b>Long Press & PASTE</b> in the caption box.<br>
            (ркХрк╛рк░ркг ркХрлЗ WhatsApp ркбрк╛ркпрк░рлЗркХрлНркЯ рк▓ркЦрк╛ркг ркиркерлА рк▓рлЗркдрлБркВ, ркдркорк╛рк░рлЗ Paste ркХрк░рк╡рлБркВ рккркбрк╢рлЗ.)
        </div>

        <div id="previewArea">ЁЯМ╕ *рк╕рлНркирлЗрк╣рлА рк╕рлНрк╡ркЬрки рк╢рлНрк░рлА,* *<span id="displayName" class="highlight">___(Name)___</span>*ЁЯМ╕

тЬиЁЯМ╕ *|| рк╣рлАрк░рккрк░рк╛ рккрк░рк┐рк╡рк╛рк░ тАУ ркЖркоркВркдрлНрк░ркг ||* ЁЯМ╕тЬи
┬а
ЁЯТЦ ркЕркорк╛рк░рк╛ ркЖркВркЧркгрлЗ ркЖрк╡ркдрк╛ркВ ркЫрлЗ рк╕рлБркЦркирк╛ркВ рк╕рлБрк╡рк░рлНрки ркХрлНрк╖ркгрлЛ, ркЬрлНркпрк╛ркВ┬а
ркЪрк┐. ркжрк░рлНрк╢рк┐рк▓ ЁЯд╡тАНтЩВя╕ПркЕркирлЗ ркЪрк┐. рк╕рлБркзрк╛ ЁЯС░тАНтЩАя╕П
ркирк╛ рк╢рлБркн рк▓ркЧрлНрки ЁЯТН ркирлА ркирк┐рк░рлНркзрк╛рк░ркгрк╛ ркеркИ ркЫрлЗ. ркдрлЛ ркЖ ркоркВркЧрк▓ рккрлНрк░рк╕ркВркЧрлЗ ркЖрккрк╢рлНрк░рлА рккркзрк╛рк░рлА рк╡рк░тАУрк╡ркзрлВркирлЗ ркЖрк╢рлАрк░рлНрк╡рк╛ркжркерлА ркирк╡рк╛ркЬрк╢рлЛ ркПрк╡рлА рк╣рк╛рк░рлНркжрк┐ркХ рк╡рк┐ркиркВркдрлА.
┬а
ЁЯУЕ *ркдрк╛рк░рлАркЦ: рк╕рлЛркорк╡рк╛рк░, рлирлм/рлжрлз/рлирлжрлирлм*
┬а
ЁЯЩПЁЯП╗ *ркирк┐ркоркВркдрлНрк░ркХ:*
рк╢рлНрк░рлА ркжрк┐рккркХркнрк╛ркИ рк░рк╡ркЬрлАркнрк╛ркИ рк╣рлАрк░рккрк░рк╛┬а
рк╢рлНрк░рлА ркЧрк┐рк░рлАрк╢ркнрк╛ркИ рк░рк╡ркЬрлАркнрк╛ркИ рк╣рлАрк░рккрк░рк╛
рк╢рлНрк░рлА ркЪркВркжрлНрк░рлЗрк╢ркнрк╛ркЗ рк░рк╡ркЬрлАркнрк╛ркИ рк╣рлАрк░рккрк░рк╛
рк╢рлНрк░рлА ркбрлЗркирк┐рк╢ ркжрк┐рккркХркнрк╛ркИ рк╣рлАрк░рккрк░рк╛┬а
ркдркерк╛ рк╣рлАрк░рккрк░рк╛ рккрк░рк┐рк╡рк╛рк░ ЁЯМ╕тЬи

тЬиЁЯМ╕ *|| ркЖрккркирлЗ ркЖрк╡ркХрк╛рк░рк╡рк╛ рк╣рлАрк░рккрк░рк╛ рккрк░рк┐рк╡рк╛рк░ рк╣рк╛рк░рлНркжрк┐ркХ ркЖркдрлБрк░ркдрк╛ркерлА рк░рк╛рк╣ ркЬрлБркП ркЫрлЗ ||* ЁЯМ╕тЬи</div>
    </div>

    <script>
        // THIS IS THE FILE NAME THE CODE LOOKS FOR
        // Make sure your real PDF is named exactly "Hirpara Parivar kankotri servo.pdf"
        const DEFAULT_PDF_FILE = "Hirpara Parivar kankotri servo.pdf";

        function updatePreview() {
            var inputName = document.getElementById("guestName").value;
            var displaySpan = document.getElementById("displayName");
            
            if (inputName.trim() !== "") {
                displaySpan.innerText = inputName;
            } else {
                displaySpan.innerText = "___(Name)___";
            }
        }

        async function shareToWhatsApp() {
            const guestName = document.getElementById("guestName").value;
            const textContent = document.getElementById("previewArea").innerText;
            const msgBox = document.getElementById("msgBox");

            if (guestName.trim() === "") {
                alert("Please enter a guest name first!");
                return;
            }

            // STEP 1: Copy Text to Clipboard (Workaround for Android WhatsApp)
            try {
                await navigator.clipboard.writeText(textContent);
                // Show the instruction box to user
                msgBox.style.display = "block"; 
            } catch (err) {
                console.error("Copy failed", err);
            }

            // STEP 2: Fetch the PDF and Share
            if (navigator.share) {
                try {
                    const response = await fetch(DEFAULT_PDF_FILE);
                    
                    if (!response.ok) {
                        throw new Error("File 'invite.pdf' not found! Please check file name.");
                    }
                    
                    const blob = await response.blob();
                    // We name the file that gets shared "Hirpara_Invitation.pdf"
                    const file = new File([blob], "Hirpara_Invitation.pdf", { type: "application/pdf" });

                    let shareData = {
                        files: [file],
                        title: 'Wedding Invitation',
                        text: textContent 
                    };

                    await navigator.share(shareData);
                } catch (err) {
                    alert("Error: " + err.message + "\n\nMake sure 'invite.pdf' is in the folder.");
                }
            } else {
                alert("Your browser does not support sharing files. Please Copy Text & Send manually.");
            }
        }
    </script>

</body>
</html>